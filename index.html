<!DOCTYPE html>
<html>

<head>
    <title>23 Final project</title>
    <link rel="stylesheet" href="src/application.css">
    <script src="src/pdf_validation.js"></script>
    <script src="src/upload_file.js"></script>
    <script src="src/API.js" defer></script>
    <script src="src/draw_chart.js" defer></script>
    <script src="tools/pdfjs-5.3.93-dist/build/pdf.mjs" type="module" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body style="background-color: rgb(163, 203, 248);">
    <div class="home_box">

        <div class="box_title">
            <div>
                <img src="src/icons/home.png" style="height: 30px; width: 30px; object-fit: scale-down;">
            </div>
            <p class="title_text">Bank Transaction Summerizer</p>
        </div>

        <div>
            <p style="font-size: 24px; font-family: Arial; font-weight: 600;">Welcome to the "Upload your bank statement and we will summerize it for you" application, please upload your file in the section below, wait for 10 seconds and we will manage the rest.</p>
            <p style="font-size: 24px; font-family: Arial; font-weight: 600;">--By Fields(Group 23)</p>
        </div>
    </div>


    <div class="upload_statement_box" id="upload">

        <div class="box_title">
            <div>
                <img src="src/icons/upload.png" style="height: 30px; width: 30px; object-fit: scale-down;">
            </div>
            <p class="title_text">Upload Statement</p>
        </div>

        <div class="upload_document">


            <button style="height: fit-content; width: fit-content;"
                onclick="document.querySelector('.uploaded_pdf').click();">Upload file</button>
            <input type="file" class="uploaded_pdf" accept=".pdf" style="display: none;"
                onchange="show_uploaded_file();">
        </div>

        <button class="div_button" onclick="console.log(transaction_json);processPDF()">Extract Transactions</button>
    </div>

    <div class="catagorization_box" id="cate-box">

        <div class="box_title">
            <div>
                <img src="src/icons/catagory.png" style="height: 30px; width: 30px; object-fit: scale-down;">
            </div>
            <p class="title_text">Categorization</p>
        </div>
    </div>

    <div class="dashboard_box">

        <div class="box_title">
            <div>
                <img src="src/icons/dashboard.png" style="height: 30px; width: 30px; object-fit: scale-down;">
            </div>
            <p class="title_text">Dashboard</p>
        </div>

        <div class="pie_chart_zone">
            <canvas class="js-myCanvas" width="200" height="200" style="margin-left: 100px;"></canvas>
            <div class="label_zone"></div>
        </div>

        <div>
            <p>Total spend of this month:</p>
        </div>

        <button class="div_button" onclick="draw_chart(data); data[2] = 400; const data_string = JSON.stringify(data); console.log(data_string,JSON.parse(data_string).length);
        localStorage.setItem('chart_data', data_string);
        window.location.href = 'src/result_page.html';
         ">Ask AI for suggestions</button>
    </div>

    <div class="currency_tools_box" id="curr-box">

        <div class="box_title">
            <div>
                <img src="src/icons/currency.png" style="height: 30px; width: 30px; object-fit: scale-down;">
            </div>
            <p class="title_text">Currency Tools</p>
        </div>

        <div class="currency_tools_records">
            <label for="fromCurrency">From:</label>
            <input list="fromCurrencyList" id="fromCurrencyInput" name="fromCurrency">

            <datalist id="fromCurrencyList">
                <!-- Options get populated dynamically -->
            </datalist>

            <label for="toCurrency">To:</label>
            <input list="toCurrencyList" id="toCurrencyInput" name="toCurrency">

            <datalist id="toCurrencyList">
                <!-- Options get populated dynamically -->
            </datalist>
            <h2 id="resultRate"></h2>
        </div>

        <button class="div_button" onclick="retrieveRate()">Find Currency Rate</button>
    </div>


    <!--These are for the pdf upload functions-->
    <script>
        let uploaded_file = "";
        let have_file = false;
        let file_name = "";
        let is_pdf = false;
        let pdf_too_large = true;
        let invalid_file = false;
        let pdf_json_input = {
            name: "input",
            content: "",
        };
        let transaction_json = "";
        let data = [200, 60, 15, 75]; // If you add more data values make sure you add more colors
    </script>

    <!--pdf.js configurations-->
    <script id="script" type="module">
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'tools/pdfjs-5.3.93-dist/build/pdf.worker.mjs';
    </script>

</body>


</html>